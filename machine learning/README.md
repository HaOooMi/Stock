# æœºå™¨å­¦ä¹ é‡åŒ–é€‰è‚¡æ¡†æ¶

åŸºäº Learning-to-Rank çš„ A è‚¡å¤šå› å­é€‰è‚¡ç³»ç»Ÿï¼Œå®ç°ä»æ•°æ®åŠ è½½ã€å› å­å·¥ç¨‹ã€æ¨¡å‹è®­ç»ƒåˆ°ç»„åˆå›æµ‹çš„å®Œæ•´é‡åŒ–ç ”ç©¶æµç¨‹ã€‚

---

## ğŸ“Œ é¡¹ç›®ç‰¹è‰²

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å®Œæ•´ç ”ç©¶æµç¨‹** | æ•°æ®å¿«ç…§ â†’ å› å­å·¥ç¨‹ â†’ æ¨¡å‹è®­ç»ƒ â†’ æ¨ªæˆªé¢è¯„ä¼° â†’ ç»„åˆå›æµ‹ |
| **å·¥ä¸šçº§æ•°æ®ç®¡ç†** | ç‰ˆæœ¬åŒ–å¿«ç…§ã€PIT å¯¹é½ã€7 å±‚å¯äº¤æ˜“æ€§è¿‡æ»¤ |
| **ä¸‰æ¡çº¿å¯¹æ¯”** | Regression / Reg-on-Rank / LambdaRank å¯¹æ¯”å®éªŒ |
| **æ¼‚ç§»ç›‘æ§** | PSI ç‰¹å¾æ¼‚ç§» + IC/Spread é¢„æµ‹æ¼‚ç§»åŒé‡æ£€æµ‹ |
| **æ— åå›æµ‹** | Open-to-Open æ‰§è¡Œæ¨¡å¼ï¼Œç¬¦åˆ A è‚¡ T+1 åˆ¶åº¦ |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®åŠ è½½å±‚                                â”‚
â”‚  InfluxDB â†’ MarketDataLoader â†’ TradabilityFilter â†’ PITAligner  â”‚
â”‚                    â†’ DataSnapshot (ç‰ˆæœ¬åŒ–å­˜å‚¨)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å› å­å·¥ç¨‹å±‚                                â”‚
â”‚  FeatureEngineer + FactorFactory (5 å¤§ç±»å› å­)                  â”‚
â”‚       â†’ Winsorize â†’ Standardize â†’ Neutralize (å¸‚å€¼+è¡Œä¸š)       â”‚
â”‚       â†’ IC/ICIR è´¨é‡æ£€æŸ¥ â†’ FactorLibraryManager (å…¥åº“)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¨¡å‹è®­ç»ƒå±‚                                â”‚
â”‚  TimeSeriesCV (Purge+Embargo) â†’ DriftDetector (PSI)            â”‚
â”‚       â†’ LightGBM / LGBMRanker                                  â”‚
â”‚       â†’ DriftDetector (IC/Spread é¢„æµ‹æ¼‚ç§»)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è¯„ä¼°å›æµ‹å±‚                                â”‚
â”‚  CrossSectionAnalyzer â†’ SimplePortfolioBacktester              â”‚
â”‚       â†’ Tearsheet (HTML æŠ¥å‘Š + å¯è§†åŒ–å›¾è¡¨)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ ç›®å½•ç»“æ„è¯¦è§£

### data/ - æ•°æ®å¤„ç†å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `data_loader.py` | `DataLoader` - ç»Ÿä¸€æ•°æ®æ¥å£ï¼Œé›†æˆå¿«ç…§ç®¡ç†ã€äº¤æ˜“è¿‡æ»¤ã€PIT å¯¹é½ |
| `data_snapshot.py` | `DataSnapshot` - ç‰ˆæœ¬åŒ–æ•°æ®å¿«ç…§ï¼ˆæ ¼å¼ï¼š`ds_2025Q4_v1`ï¼‰ï¼Œå«å®Œæ•´æ€§æ ¡éªŒ |
| `market_data_loader.py` | `MarketDataLoader` - InfluxDB è¡Œæƒ…åŠ è½½ |
| `financial_data_loader.py` | `FinancialDataLoader` - å­£åº¦è´¢åŠ¡æŠ¥è¡¨åŠ è½½ |
| `time_series_cv.py` | `TimeSeriesCV` - Purge + Embargo æ—¶åºåˆ‡åˆ† |
| `tradability_filter.py` | `TradabilityFilter` - 7 å±‚è¿‡æ»¤ï¼šST/åœç‰Œ/æ¶¨è·Œåœ/ä¸Šå¸‚é¾„/æˆäº¤é‡/ä»·æ ¼/æ¢æ‰‹ç‡ |
| `pit_aligner.py` | `PITDataAligner` - è´¢åŠ¡æ•°æ® PIT å¯¹é½ï¼šå…¬å‘Šæ—¥ + æ»åç”Ÿæ•ˆ + å‰å¤æƒ |

### features/ - å› å­å·¥ç¨‹å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `feature_engineering.py` | `FeatureEngineer` - åŸºç¡€ç‰¹å¾å·¥ç¨‹ï¼šæŠ€æœ¯æŒ‡æ ‡ç”Ÿæˆ + ç‰¹å¾é€‰æ‹© + æ ‡å‡†åŒ– |
| `factor_factory.py` | `FactorFactory` - é«˜çº§å› å­å·¥å‚ï¼š5 å¤§å› å­æ—ï¼Œå«æ–‡çŒ®å¼•ç”¨ |
| `factor_library_manager.py` | `FactorLibraryManager` - å› å­åº“ç‰ˆæœ¬æ§åˆ¶ + å…¥åº“æ ‡å‡† + å› å­æ¸…å•ç»´æŠ¤ |

**å› å­å·¥å‚æ–¹æ³•ï¼ˆFactorFactoryï¼‰**ï¼š

| æ–¹æ³• | å› å­æ— | è¯´æ˜ |
|------|--------|------|
| `calc_roc_family()` | åŠ¨é‡ | ROC_5/10/20/60/120 |
| `calc_price_to_sma()` | åŠ¨é‡ | ä»·æ ¼åç¦»å‡çº¿ |
| `calc_long_short_momentum()` | åŠ¨é‡ | é•¿åŠ¨é‡-çŸ­åè½¬å¤åˆ |
| `calc_rank_momentum()` | åŠ¨é‡ | æ’ååŠ¨é‡ |
| `calc_realized_volatility()` | æ³¢åŠ¨ç‡ | å·²å®ç°æ³¢åŠ¨ç‡ |
| `calc_parkinson_volatility()` | æ³¢åŠ¨ç‡ | Parkinson æ³¢åŠ¨ç‡ |
| `calc_garman_klass_volatility()` | æ³¢åŠ¨ç‡ | Garman-Klass æ³¢åŠ¨ç‡ |
| `calc_return_skewness_kurtosis()` | æ³¢åŠ¨ç‡ | æ”¶ç›Šååº¦/å³°åº¦ |
| `calc_turnover_factors()` | é‡ä»· | æ¢æ‰‹ç‡å› å­ |
| `calc_volume_price_correlation()` | é‡ä»· | é‡ä»·ç›¸å…³æ€§ |
| `calc_vwap_deviation()` | é‡ä»· | VWAP åç¦»åº¦ |
| `calc_amihud_illiquidity()` | é‡ä»· | Amihud éæµåŠ¨æ€§ |
| `calc_price_range_factors()` | é‡ä»· | ä»·æ ¼åŒºé—´å› å­ |
| `calc_v1_core_factors()` | æ ¸å¿ƒ | A è‚¡ç‰¹åŒ–å› å­ï¼ˆåè½¬/ä½æ³¢/ååšå½©ï¼‰ |

### targets/ - æ ‡ç­¾å¤„ç†å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `target_engineering.py` | `TargetEngineer` - ç”Ÿæˆæœªæ¥æ”¶ç›Šç‡ã€åˆ†ç±»æ ‡ç­¾ã€é˜²æ³„æ¼å¤„ç† |
| `ranking_labels.py` | `RankingLabelFactory` - LambdaRank åˆ†æ¡¶æ ‡ç­¾ç”Ÿæˆï¼ˆGaussRank/åˆ†ç®±ï¼‰ |

> âš ï¸ `label_transformer.py` æœªè¢«ä¸»æµç¨‹ä½¿ç”¨ï¼Œä¿ç•™ä¾›æ‰©å±•

### models/ - æ¨¡å‹å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `base_model.py` | `BaseModel` - æŠ½è±¡åŸºç±»ï¼Œç»Ÿä¸€æ¥å£ï¼šfit / predict / save / load |
| `lgbm_model.py` | `LightGBMModel` - LightGBM å›å½’ï¼šæ¢¯åº¦æå‡æ ‘ + æ—©åœ + ç‰¹å¾é‡è¦æ€§ |
| `lgbm_ranker.py` | `LightGBMRanker` - LightGBM LambdaRankï¼šç›´æ¥ä¼˜åŒ– NDCG æ’åºæŒ‡æ ‡ |

> âš ï¸ `ridge_model.py`ã€`rf_model.py` ä»…è¢«åºŸå¼ƒçš„ `train_modelsï¼ˆoldï¼‰.py` ä½¿ç”¨

> âš ï¸ `transformers/pca.py` ç”¨äºç‹¬ç«‹çš„ PCA åˆ†ææµç¨‹ï¼ˆ`run_pca_state.py`ï¼‰ï¼Œä¸åœ¨ä¸»æµç¨‹ä¸­

### evaluation/ - è¯„ä¼°å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `cross_section_analyzer.py` | `CrossSectionAnalyzer` - æ¨ªæˆªé¢åˆ†æå™¨ï¼šå°è£… IC/ICIR/Spread/å•è°ƒæ€§è®¡ç®— |
| `cross_section_metrics.py` | æ ¸å¿ƒåº¦é‡å‡½æ•°ï¼š`calculate_forward_returns()`ã€Rank ICã€åˆ†æ¡¶æ”¶ç›Š |
| `factor_preprocessing.py` | å› å­é¢„å¤„ç†å‡½æ•°ï¼š`winsorize_factor()`ã€`standardize_factor()`ã€ä¸­æ€§åŒ– |
| `drift_detector.py` | `DriftDetector` - æ¼‚ç§»æ£€æµ‹ï¼šPSI åˆ†å¸ƒæ¼‚ç§» + IC/Spread é¢„æµ‹æ¼‚ç§» |
| `tearsheet.py` | HTML Tearsheet æŠ¥å‘Šç”Ÿæˆï¼š`generate_html_tearsheet()` |
| `visualization.py` | å¯è§†åŒ–å‡½æ•°ï¼šIC æ—¶åºã€åˆ†æ¡¶æ”¶ç›Šã€Spread ç´¯è®¡ã€æ¢æ‰‹ç‡ã€æœˆåº¦çƒ­åŠ›å›¾ |

> âš ï¸ ä»¥ä¸‹æ¨¡å—æœªè¢«ä¸»æµç¨‹ä½¿ç”¨ï¼Œä¿ç•™ä¾›æ‰©å±•ï¼š
> - `bucketing.py` - åˆ†æ¡¶å‡½æ•°
> - `metrics.py` - åŸºç¡€æŒ‡æ ‡å‡½æ•°
> - `cross_section_adapter.py` - æ¨ªæˆªé¢æ•°æ®é€‚é…å™¨
> - `reporting.py` - æŠ¥å‘Šç”Ÿæˆ
> - `cluster/cluster_evaluate.py` - èšç±»è¯„ä¼°ï¼ˆç”¨äºç‹¬ç«‹çš„ `run_cluster_analysis.py`ï¼‰

### backtest/ - å›æµ‹å±‚

| æ¨¡å— | ç±»/åŠŸèƒ½ |
|------|---------|
| `simple_backtest.py` | `SimplePortfolioBacktester` - Top-K ç­–ç•¥å›æµ‹ï¼ˆv2.0ï¼‰ï¼šç­‰æƒ/åˆ†æ•°åŠ æƒ + è°ƒä»“é¢‘ç‡ + åŸºå‡†å¯¹æ¯” + äº¤æ˜“æˆæœ¬ |

> âš ï¸ `top_bucket_backtest.py`ã€`cluster_strategy_backtest.py` æœªè¢«ä¸»æµç¨‹ä½¿ç”¨ï¼Œä¿ç•™ä¾›æ‰©å±•

### pipelines/ - æ‰§è¡Œç®¡é“

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| `run_baseline_pipeline.py` | **ä¸»è®­ç»ƒç®¡é“**ï¼šä¸‰æ¡çº¿å¯¹æ¯”ï¼ˆå›å½’/Reg-on-Rank/LambdaRankï¼‰+ æ¨ªæˆªé¢è¯„ä¼° + å›æµ‹ |
| `prepare_factors.py` | å› å­å‡†å¤‡ï¼šç”Ÿæˆ â†’ è´¨é‡æ£€æŸ¥ â†’ IC è¯„ä¼° â†’ å…¥åº“ |
| `prepare_data_with_snapshot.py` | æ•°æ®å‡†å¤‡ + å¿«ç…§åˆ›å»º |

> âš ï¸ ä»¥ä¸‹ç®¡é“æœªé›†æˆåˆ°ä¸»æµç¨‹ï¼ˆ`main.py`ï¼‰ï¼š
> - `prepare_data.py` - æ•°æ®å‡†å¤‡ï¼ˆæ— å¿«ç…§ç‰ˆæœ¬ï¼‰
> - `run_cluster_analysis.py` - ç‹¬ç«‹çš„èšç±»åˆ†æ
> - `run_pca_state.py` - ç‹¬ç«‹çš„ PCA é™ç»´
> - `train_modelsï¼ˆoldï¼‰.py` - åºŸå¼ƒçš„æ—§ç‰ˆè®­ç»ƒè„šæœ¬

### æ ¹ç›®å½•

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| `main.py` | `MLPipeline` - ç»Ÿä¸€å…¥å£ï¼šä¸²è” prepare_data_with_snapshot â†’ prepare_factors â†’ run_baseline_pipeline |

---

## ğŸ”§ æ ¸å¿ƒæœºåˆ¶è¯¦è§£

### 1. 7 å±‚å¯äº¤æ˜“æ€§è¿‡æ»¤ï¼ˆTradabilityFilterï¼‰

æŒ‰é¡ºåºæ‰§è¡Œï¼Œç¡®ä¿é€‰è‚¡æ± ä¸­åªæœ‰çœŸæ­£å¯äº¤æ˜“çš„è‚¡ç¥¨ï¼š

| å±‚çº§ | è¿‡æ»¤é¡¹ | é»˜è®¤é˜ˆå€¼ | è¯´æ˜ |
|------|--------|----------|------|
| 1 | ST/é€€å¸‚ | æ’é™¤ | é¿å…å¼‚å¸¸è‚¡ç¥¨ |
| 2 | åœç‰Œ | æ’é™¤ | å½“æ—¥æ— æ³•äº¤æ˜“ |
| 3 | æ¶¨è·Œåœ | Â±9.5% | æ— æ³•æŒ‰é¢„æœŸä»·æ ¼æˆäº¤ |
| 4 | ä¸Šå¸‚é¾„ | â‰¥60å¤© | é¿å…æ–°è‚¡å¼‚å¸¸æ³¢åŠ¨ |
| 5 | æˆäº¤é‡ | â‰¥2000æ‰‹ | æµåŠ¨æ€§ä¿éšœ |
| 6 | ä»·æ ¼ | â‰¥1å…ƒ | é¿å…ä»™è‚¡ |
| 7 | æ¢æ‰‹ç‡ | â‰¥0.1% | æ´»è·ƒåº¦ä¿éšœ |

### 2. Point-in-Time (PIT) æ•°æ®å¯¹é½

**æ ¸å¿ƒåŸåˆ™**ï¼šç»ä¸ä½¿ç”¨æœªæ¥ä¿¡æ¯

```
è´¢åŠ¡æ•°æ®ç”Ÿæ•ˆæ—¶é—´ = å…¬å‘Šæ—¥ + æ»åå¤©æ•°ï¼ˆé»˜è®¤90å¤©ï¼‰
```

- **è´¢åŠ¡æ•°æ®**ï¼šæŒ‰å…¬å‘Šæ—¥ï¼ˆéæŠ¥å‘ŠæœŸï¼‰+ 90å¤©æ»åç”Ÿæ•ˆ
- **å‰å‘å¡«å……**ï¼šæœ€å¤š95å¤©ï¼ˆå­£æŠ¥é—´éš”90å¤© + 5å¤©ç¼“å†²ï¼‰
- **å‰å¤æƒ**ï¼šä½¿ç”¨å¤æƒå› å­è°ƒæ•´å†å²ä»·æ ¼

### 3. æ•°æ®å¿«ç…§ç³»ç»Ÿï¼ˆDataSnapshotï¼‰

**ç‰ˆæœ¬å‘½åè§„åˆ™**ï¼š`ds_YYYYQQ_vN`ï¼ˆå¦‚ `ds_2025Q4_v1`ï¼‰

**æ•°æ®è´¨é‡æ£€æŸ¥é¡¹**ï¼š

| æ£€æŸ¥é¡¹ | çº¢ç¯é˜ˆå€¼ | è¯´æ˜ |
|--------|----------|------|
| ç¼ºå¤±ç‡ | > 20% | ç‰¹å¾ç¼ºå¤±è¿‡å¤š |
| é‡å¤æ•°æ® | > 1% | æ•°æ®é‡å¤è®°å½• |
| å¯äº¤æ˜“æ ·æœ¬ | < 70% | æœ‰æ•ˆæ ·æœ¬å¤ªå°‘ |
| æå€¼æ¯”ä¾‹ | > 5% | å¼‚å¸¸å€¼è¿‡å¤š |

**å¿«ç…§åŒ…å«**ï¼šç‰¹å¾çŸ©é˜µï¼ˆParquetï¼‰+ æ ‡ç­¾æ•°æ®ï¼ˆParquetï¼‰+ å…ƒæ•°æ® JSON

### 4. æ—¶åºäº¤å‰éªŒè¯ï¼ˆPurge + Embargoï¼‰

```
æ—¶é—´è½´ï¼š
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Train      â”‚      Valid      â”‚       Test       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â†‘ purge_end                       â†‘ embargo_start
   (train_end - purge_days)      (valid_end + embargo_days)
```

| å‚æ•° | å»ºè®®å€¼ | è¯´æ˜ |
|------|--------|------|
| purge_days | â‰¥ max_horizon | é¿å…ç›®æ ‡æ ‡ç­¾é‡å  |
| embargo_days | horizon / 2 | é¿å…ä¿¡æ¯æ¸—é€ |
| train_ratio | 60% | è®­ç»ƒé›†å æ¯” |
| valid_ratio | 20% | éªŒè¯é›†å æ¯” |

### 5. ä¸‰æ¡çº¿æ ‡ç­¾æ„é€ ï¼ˆRankingLabelFactoryï¼‰

| ä»»åŠ¡ç±»å‹ | æ ‡ç­¾æ„é€  | æ¨¡å‹ | ä¼˜åŒ–ç›®æ ‡ |
|----------|----------|------|----------|
| `regression` | åŸå§‹æ”¶ç›Šç‡ | LightGBMModel | MSE |
| `regression_rank` | æ¨ªæˆªé¢ GaussRank | LightGBMModel | MSE(æ’åºå€¼) |
| `lambdarank` | åˆ†ç®±ç­‰çº§(0~4) + group | LightGBMRanker | NDCG |

**GaussRank å˜æ¢**ï¼šå°†å‡åŒ€æ’åºæ˜ å°„ä¸ºæ­£æ€åˆ†å¸ƒ
```
rank_pct = (rank - 1) / (N - 1)  â†’  GaussRank = Î¦â»Â¹(rank_pct)
```

### 6. å› å­é¢„å¤„ç†æµæ°´çº¿

**é¡ºåºä¸¥æ ¼**ï¼ˆä¸å¯é¢ å€’ï¼‰ï¼š

1. **Winsorize**ï¼š1%-99% åˆ†ä½æ•°æˆªæ–­ï¼ˆå»æå€¼ï¼‰
2. **Standardize**ï¼šZ-score = (x - Î¼) / Ïƒï¼ˆæ ‡å‡†åŒ–ï¼‰
3. **Neutralize**ï¼šmarket_cap + industry å›å½’æ®‹å·®ï¼ˆä¸­æ€§åŒ–ï¼‰

```
factor_neutralized = factor - Î²â‚ Ã— log(market_cap) - Î²â‚‚ Ã— industry_dummies
```

### 7. PSI æ¼‚ç§»æ£€æµ‹ï¼ˆDriftDetectorï¼‰

**Population Stability Index**ï¼š

```
PSI = Î£ (actual_pct - expected_pct) Ã— ln(actual_pct / expected_pct)
```

| PSI å€¼ | åˆ¤æ–­ |
|--------|------|
| < 0.1 | åˆ†å¸ƒç¨³å®š âœ“ |
| 0.1 ~ 0.2 | è½»å¾®æ¼‚ç§» âš ï¸ |
| â‰¥ 0.2 | æ˜¾è‘—æ¼‚ç§» âŒ |

### 8. æ¨ªæˆªé¢è¯„ä¼°æŒ‡æ ‡ï¼ˆCrossSectionAnalyzerï¼‰

| æŒ‡æ ‡ | å…¬å¼ | è¯´æ˜ |
|------|------|------|
| Rank IC | Spearman(é¢„æµ‹, æ”¶ç›Š) | æ¯æ—¥æ¨ªæˆªé¢ç›¸å…³ |
| ICIR | mean(IC) / std(IC) | IC ç¨³å®šæ€§ |
| ICIR å¹´åŒ– | ICIR Ã— âˆš252 | å¹´åŒ–ä¿¡æ¯æ¯”ç‡ |
| Top-Mean Spread | mean(Topæ¡¶) - mean(å…¨ä½“) | å¤´éƒ¨è¶…é¢æ”¶ç›Š |
| å•è°ƒæ€§ | Ï„(bucket, return) | åˆ†æ¡¶æ”¶ç›Šé€’å¢æ€§ |

### 9. å›æµ‹æ‰§è¡Œæ¨¡å¼ï¼ˆSimplePortfolioBacktester v2.0ï¼‰

**Open-to-Openï¼ˆå›ºå®šæ¨¡å¼ï¼‰**ï¼š

```
T æ—¥æ”¶ç›˜ â†’ è®¡ç®—ä¿¡å· â†’ T+1 æ—¥å¼€ç›˜ä¹°å…¥ â†’ T+H æ—¥å¼€ç›˜å–å‡º
```

| å‚æ•° | é€‰é¡¹ | è¯´æ˜ |
|------|------|------|
| `top_k` | 10/20/30 | é€‰è‚¡æ•°é‡ |
| `rebalance_freq` | 1D/1W/1M | è°ƒä»“é¢‘ç‡ |
| `weighting` | equal/score_weighted | æƒé‡æ–¹å¼ |
| `commission` | 0.0003 | ä½£é‡‘ï¼ˆä¸‡3ï¼‰ |
| `stamp_duty` | 0.001 | å°èŠ±ç¨ï¼ˆåƒ1ï¼‰ |
| `slippage` | 0.001 | æ»‘ç‚¹ä¼°è®¡ |

**åŸºå‡†å¯¹æ¯”**ï¼šæ”¯æŒç­‰æƒåŸºå‡†ï¼Œè®¡ç®— Alpha/Beta/Information Ratio

**è¾“å‡ºå›¾è¡¨**ï¼šå‡€å€¼æ›²çº¿ã€å›æ’¤ã€æœˆåº¦çƒ­åŠ›å›¾ã€æ¢æ‰‹ç‡ä¸æˆæœ¬

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

```bash
# Conda å®‰è£…ï¼ˆæ¨èï¼‰
conda env create -f environment.yml
conda activate ML

# pip å®‰è£…
pip install -r requirements.txt
```

**Python ç‰ˆæœ¬**ï¼š3.9+ï¼ˆå·²æµ‹è¯• 3.9.23ï¼‰

**ç‰¹æ®Šä¾èµ–**ï¼šTA-Lib éœ€é¢„è£… C åº“

### 2. æ•°æ®æºé…ç½®

ç¼–è¾‘ `configs/ml_baseline.yml`ï¼š

```yaml
data:
  influxdb:
    enabled: true
    url: "http://localhost:8086"
    org: "stock"
    bucket: "stock_kdata"
    token: "YOUR_TOKEN"
```

### 3. è¿è¡Œå®Œæ•´æµç¨‹

```bash
# ç»Ÿä¸€å…¥å£
python main.py

# å¿«é€Ÿæ¨¡å¼ï¼ˆè·³è¿‡æ¼‚ç§»æ£€æµ‹ï¼‰
python main.py --skip_drift

# ä¸‰æ¡çº¿å¯¹æ¯”
python main.py --compare_all

# ä»…è¿è¡Œç‰¹å®šæ­¥éª¤
python main.py --only prepare_data
python main.py --only prepare_factors
python main.py --only train
```

### 4. ç›´æ¥è¿è¡Œå­ç®¡é“

```bash
# æ•°æ®å‡†å¤‡ + å¿«ç…§
python pipelines/prepare_data_with_snapshot.py

# å› å­å·¥ç¨‹ + IC è¯„ä¼°
python pipelines/prepare_factors.py

# è®­ç»ƒ + è¯„ä¼° + å›æµ‹
python pipelines/run_baseline_pipeline.py --compare_all --skip_drift

# èšç±»åˆ†æ
python pipelines/run_cluster_analysis.py

# PCA é™ç»´
python pipelines/run_pca_state.py
```

---

## ğŸ“Š è¾“å‡ºäº§ç‰©

### å®Œæ•´ç›®å½•ç»“æ„ï¼ˆåŸºäºå®é™…ä»£ç ï¼‰

```
ML output/
â”œâ”€â”€ snapshots/                   # æ•°æ®å¿«ç…§ï¼ˆç‰ˆæœ¬åŒ–ç®¡ç†ï¼‰â­ä¸»æµç¨‹
â”‚   â””â”€â”€ ds_2025Q4_v1/
â”‚       â”œâ”€â”€ 000001_data.parquet           # è‚¡ç¥¨æ•°æ®ï¼ˆç‰¹å¾+æ ‡ç­¾ï¼‰
â”‚       â””â”€â”€ metadata.json                 # å…ƒæ•°æ®ï¼ˆå“ˆå¸Œã€ç»Ÿè®¡ã€è¿‡æ»¤é…ç½®ï¼‰
â”‚
â”œâ”€â”€ datasets/                    # å› å­æ•°æ®é›† â­ä¸»æµç¨‹
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ qualified_factors_YYYYMMDD.parquet  # åˆæ ¼å› å­åˆ—è¡¨
â”‚       â””â”€â”€ qualified_factors_YYYYMMDD.csv      # CSVå‰¯æœ¬
â”‚
â”œâ”€â”€ models/                      # è®­ç»ƒå¥½çš„æ¨¡å‹ â­ä¸»æµç¨‹
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ regression_model.pkl           # å›å½’æ¨¡å‹
â”‚       â”œâ”€â”€ regression_rank_model.pkl      # Reg-on-Rank æ¨¡å‹
â”‚       â””â”€â”€ lambdarank_model.pkl           # LambdaRank æ¨¡å‹
â”‚
â”œâ”€â”€ predictions/                 # é¢„æµ‹ç»“æœ â­ä¸»æµç¨‹
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ regression_predictions.parquet
â”‚       â”œâ”€â”€ regression_rank_predictions.parquet
â”‚       â””â”€â”€ lambdarank_predictions.parquet
â”‚
â”œâ”€â”€ scalers/                     # æ ‡å‡†åŒ–å™¨ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ baseline_v1/
â”‚       â””â”€â”€ scaler_000001.pkl              # æŒ‰è‚¡ç¥¨ä¿å­˜
â”‚
â”œâ”€â”€ states/                      # PCA é™ç»´çŠ¶æ€ï¼ˆå¯é€‰ï¼Œä»… run_pca_state.pyï¼‰
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ train/
â”‚       â”œâ”€â”€ valid/
â”‚       â””â”€â”€ test/
â”‚
â”œâ”€â”€ reports/                     # è¯„ä¼°æŠ¥å‘Š
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ training/            # è®­ç»ƒæŠ¥å‘Š â­ä¸»æµç¨‹
â”‚       â”‚   â”œâ”€â”€ model_comparison.json          # ä¸‰æ¡çº¿å¯¹æ¯”
â”‚       â”‚   â”œâ”€â”€ feature_drift_report.json      # ç‰¹å¾æ¼‚ç§»
â”‚       â”‚   â””â”€â”€ prediction_drift_report.json   # é¢„æµ‹æ¼‚ç§»
â”‚       â”‚
â”‚       â”œâ”€â”€ evaluation/          # è¯„ä¼°æŠ¥å‘Š â­ä¸»æµç¨‹
â”‚       â”‚   â”œâ”€â”€ regression_results.json        # æ¨ªæˆªé¢åˆ†æç»“æœ
â”‚       â”‚   â”œâ”€â”€ regression_rank_results.json
â”‚       â”‚   â””â”€â”€ lambdarank_results.json
â”‚       â”‚
â”‚       â”œâ”€â”€ factors/             # å› å­è¯„ä¼°æŠ¥å‘Šï¼ˆprepare_factors.pyï¼‰
â”‚       â”‚   â”œâ”€â”€ factor_screening_detail_YYYYMMDD.csv    # å› å­ç­›é€‰è¯¦æƒ…
â”‚       â”‚   â”œâ”€â”€ ic_series/                              # ICæ—¶åºCSV
â”‚       â”‚   â”‚   â”œâ”€â”€ ic_ROC_20_5d.csv
â”‚       â”‚   â”‚   â””â”€â”€ ...
â”‚       â”‚   â”œâ”€â”€ quantile_returns/                       # åˆ†ä½æ•°æ”¶ç›ŠCSV
â”‚       â”‚   â”‚   â”œâ”€â”€ quantile_returns_ROC_20_5d.csv
â”‚       â”‚   â”‚   â””â”€â”€ ...
â”‚       â”‚   â”œâ”€â”€ tearsheet_ROC_20_5d.html               # å› å­ HTML æŠ¥å‘Š
â”‚       â”‚   â””â”€â”€ tradability_filter_log.csv             # å¯äº¤æ˜“æ€§è¿‡æ»¤æ—¥å¿—
â”‚       â”‚
â”‚       â”œâ”€â”€ data_quality/        # æ•°æ®è´¨é‡æŠ¥å‘Šï¼ˆprepare_data_with_snapshot.pyï¼‰
â”‚       â”‚   â””â”€â”€ ds_2025Q4_v1.json
â”‚       â”‚
â”‚       â”œâ”€â”€ regression_backtest/     # å›æµ‹è¯¦ç»†æ•°æ® â­ä¸»æµç¨‹
â”‚       â”‚   â”œâ”€â”€ portfolio_weights.parquet      # æ¯æ—¥æŒä»“æƒé‡
â”‚       â”‚   â”œâ”€â”€ daily_returns.parquet          # æ¯›æ”¶ç›Š/å‡€æ”¶ç›Š/æˆæœ¬/æ¢æ‰‹
â”‚       â”‚   â””â”€â”€ backtest_stats.json            # å®Œæ•´ç»Ÿè®¡æŒ‡æ ‡
â”‚       â”‚
â”‚       â”œâ”€â”€ regression_rank_backtest/
â”‚       â”‚   â””â”€â”€ ï¼ˆåŒä¸Š3ä¸ªæ–‡ä»¶ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ lambdarank_backtest/
â”‚       â”‚   â””â”€â”€ ï¼ˆåŒä¸Š3ä¸ªæ–‡ä»¶ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ clustering/          # èšç±»åˆ†ææŠ¥å‘Šï¼ˆå¯é€‰ï¼Œrun_cluster_analysis.pyï¼‰
â”‚       â””â”€â”€ pca/                 # PCA åˆ†ææŠ¥å‘Šï¼ˆå¯é€‰ï¼Œrun_pca_state.pyï¼‰
â”‚
â”œâ”€â”€ figures/                     # å¯è§†åŒ–å›¾è¡¨
â”‚   â””â”€â”€ baseline_v1/
â”‚       â”œâ”€â”€ regression_backtest.png        # å›æµ‹ 4 å­å›¾ â­ä¸»æµç¨‹
â”‚       â”œâ”€â”€ regression_rank_backtest.png
â”‚       â”œâ”€â”€ lambdarank_backtest.png
â”‚       â”‚
â”‚       â””â”€â”€ factors/             # å› å­å›¾è¡¨ï¼ˆprepare_factors.pyï¼‰
â”‚           â”œâ”€â”€ ic_series_ROC_20_5d.png       # IC èµ°å»Šå›¾
â”‚           â”œâ”€â”€ ic_dist_ROC_20_5d.png         # IC åˆ†å¸ƒç›´æ–¹å›¾
â”‚           â”œâ”€â”€ ic_heatmap_ROC_20_5d.png      # IC æœˆåº¦çƒ­åŠ›å›¾
â”‚           â”œâ”€â”€ quantile_cumret_ROC_20_5d.png # åˆ†ä½æ•°ç´¯è®¡æ”¶ç›Š
â”‚           â”œâ”€â”€ quantile_meanret_ROC_20_5d.png# åˆ†ä½æ•°å¹³å‡æ”¶ç›Š
â”‚           â””â”€â”€ spread_cumret_ROC_20_5d.png   # Spread ç´¯è®¡æ”¶ç›Š
â”‚
â””â”€â”€ artifacts/                   # å…¶ä»–å·¥ä»¶
    â””â”€â”€ baseline_v1/
```

**è¯´æ˜**ï¼š
- â­æ ‡è®°ï¼šä¸»æµç¨‹ï¼ˆmain.pyï¼‰å¿…å®šè¾“å‡º
- æ— æ ‡è®°ï¼šå¯é€‰æµç¨‹è¾“å‡ºï¼ˆå¦‚ run_pca_state.pyã€run_cluster_analysis.pyï¼‰
- ä¸‰æ¡çº¿ï¼šæ¯ç§ä»»åŠ¡ç±»å‹ï¼ˆregression/regression_rank/lambdarankï¼‰å„ç”Ÿæˆä¸€å¥—æ–‡ä»¶

### å…³é”®æ–‡ä»¶è¯¦è§£

| æ–‡ä»¶ | æ ¼å¼ | å†…å®¹ | æ¥æºç®¡é“ |
|------|------|------|----------|
| `{symbol}_data.parquet` | Parquet | ç‰¹å¾çŸ©é˜µ + æ ‡ç­¾ï¼ˆMultiIndex: date Ã— tickerï¼‰ | prepare_data_with_snapshot |
| `metadata.json` | JSON | å¿«ç…§å…ƒæ•°æ®ï¼šå“ˆå¸Œã€æ ·æœ¬æ•°ã€ç‰¹å¾æ•°ã€è¿‡æ»¤é…ç½®ã€è´¨é‡æ£€æŸ¥ | prepare_data_with_snapshot |
| `qualified_factors_*.parquet` | Parquet | é€šè¿‡ IC/ICIR ç­›é€‰çš„åˆæ ¼å› å­åˆ—è¡¨ | prepare_factors |
| `factor_screening_detail_*.csv` | CSV | æ‰€æœ‰å› å­çš„ IC/ICIR/p-value/å…¥åº“åˆ¤æ–­ | prepare_factors |
| `tearsheet_*.html` | HTML | å› å­å®Œæ•´è¯„ä¼°æŠ¥å‘Šï¼ˆå¯æµè§ˆå™¨æ‰“å¼€ï¼‰ | prepare_factors |
| `ic_*.csv` | CSV | IC æ—¶åºæ•°æ® | prepare_factors |
| `quantile_returns_*.csv` | CSV | åˆ†ä½æ•°æ”¶ç›Šæ—¶åº | prepare_factors |
| `{task_type}_model.pkl` | PKL | è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹è±¡ | run_baseline_pipeline |
| `{task_type}_predictions.parquet` | Parquet | é¢„æµ‹åˆ†æ•° + çœŸå®æ ‡ç­¾ + bucket æ ‡è®° | run_baseline_pipeline |
| `{task_type}_results.json` | JSON | æ¨ªæˆªé¢åˆ†æï¼šIC/ICIR/Spread/å•è°ƒæ€§ | run_baseline_pipeline |
| `model_comparison.json` | JSON | ä¸‰æ¡çº¿å¯¹æ¯”ï¼šICã€ICIRã€Spreadã€èƒœç‡ | run_baseline_pipeline |
| `feature_drift_report.json` | JSON | æ¯ä¸ªç‰¹å¾çš„ PSI å€¼å’Œæ¼‚ç§»åˆ¤æ–­ | run_baseline_pipeline |
| `prediction_drift_report.json` | JSON | Valid vs Test çš„ IC/Spread å¯¹æ¯” | run_baseline_pipeline |
| `portfolio_weights.parquet` | Parquet | æ¯æ—¥æ¯åªè‚¡ç¥¨çš„æŒä»“æƒé‡ï¼ˆMultiIndex: date Ã— tickerï¼‰ | run_baseline_pipeline |
| `daily_returns.parquet` | Parquet | æ¯›æ”¶ç›Šã€å‡€æ”¶ç›Šã€äº¤æ˜“æˆæœ¬ã€æ¢æ‰‹ç‡æ—¶åº | run_baseline_pipeline |
| `backtest_stats.json` | JSON | å¹´åŒ–æ”¶ç›Šã€å¤æ™®ã€å›æ’¤ã€Alpha/Beta/IR ç­‰å®Œæ•´æŒ‡æ ‡ | run_baseline_pipeline |
| `{task_type}_backtest.png` | PNG | å›æµ‹ 4 å­å›¾ï¼šå‡€å€¼æ›²çº¿/å›æ’¤/æœˆåº¦çƒ­åŠ›å›¾/æ¢æ‰‹ç‡ä¸æˆæœ¬ | run_baseline_pipeline |
```

### è¯„ä¼°æŠ¥å‘Šç¤ºä¾‹

**ä¸‰æ¡çº¿å¯¹æ¯”**ï¼š

```
ä»»åŠ¡ç±»å‹                Mean IC     ICIR      ICIR(å¹´åŒ–)   Spread
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
regression            0.0674      0.3878     6.16        0.0046
regression_rank       0.0543      0.3772     5.99        0.0017
lambdarank            0.0316      0.2101     3.34        0.0035
```

**å›æµ‹ç»©æ•ˆ**ï¼š

```
ç­–ç•¥              å¹´åŒ–æ”¶ç›Š   æ³¢åŠ¨ç‡    å¤æ™®æ¯”ç‡   æœ€å¤§å›æ’¤   Alpha    Beta
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Top-20 ç­‰æƒ       12.5%     18.3%     0.68      -22.1%    8.2%    0.85
åŸºå‡†ï¼ˆç­‰æƒï¼‰       5.0%     20.5%     0.24      -35.2%    -       1.00
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

`configs/ml_baseline.yml` ä¸»è¦é…ç½®æ®µï¼š

| é…ç½®æ®µ | è¯´æ˜ |
|--------|------|
| `project` | é¡¹ç›®åç§°ã€ç‰ˆæœ¬ã€æè¿° |
| `paths` | å„ç±»è¾“å‡ºç›®å½•é…ç½® |
| `data` | è‚¡ç¥¨æ± ã€æ—¥æœŸèŒƒå›´ã€InfluxDB è¿æ¥ã€äº¤æ˜“è¿‡æ»¤å‚æ•°ã€PIT å¯¹é½ |
| `features` | é¢„å¤„ç†å‚æ•°ã€å› å­å·¥å‚é…ç½®ã€ä¸­æ€§åŒ–è®¾ç½® |
| `target` | ç›®æ ‡å˜é‡åã€é¢„æµ‹å‘¨æœŸã€æ”¶ç›Šç±»å‹ |
| `split` | è®­ç»ƒ/éªŒè¯/æµ‹è¯•æ¯”ä¾‹ã€Purge/Embargo å¤©æ•° |
| `ranking` | ä»»åŠ¡ç±»å‹ã€åˆ†æ¡¶æ•°ã€NDCG è¯„ä¼°ä½ç½® |
| `models` | å„æ¨¡å‹å‚æ•°ï¼ˆRidge/RF/LightGBM/LGBMRankerï¼‰ |
| `evaluation` | åˆ†æ¡¶æ•°ã€è¯„ä¼°æŒ‡æ ‡åˆ—è¡¨ |
| `backtest` | è°ƒä»“é¢‘ç‡ã€Top-Kã€äº¤æ˜“æˆæœ¬ã€åŸºå‡†é…ç½® |

---

## ğŸ“ˆ å› å­è´¨é‡æ ‡å‡†

### å…¥åº“æ ‡å‡†ï¼ˆä¸¤æ¡£ï¼‰

| æ ‡å‡† | IC å‡å€¼ | ICIR | p-value | é€‚ç”¨åœºæ™¯ |
|------|---------|------|---------|----------|
| ä¸¥æ ¼ | â‰¥ 0.02 | â‰¥ 0.5 | < 0.05 | ç”Ÿäº§çº§å› å­ |
| æ¢ç´¢ | â‰¥ 0.005 | â‰¥ 0.15 | < 0.10 | ç ”ç©¶çº§å› å­ |

### æ¼‚ç§»ç›‘æ§æ ‡å‡†

| æŒ‡æ ‡ | é˜ˆå€¼ | è¯´æ˜ |
|------|------|------|
| ç‰¹å¾ PSI | < 0.2 | åˆ†å¸ƒç¨³å®š |
| Valid vs Test IC å·® | < 30% | é¢„æµ‹ä¸€è‡´ |
| åˆæ ¼å› å­æ•° | â‰¥ 10 | æœ€å°æ•°é‡ |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: "æ— æ³•åŠ è½½ä»·æ ¼æ•°æ®"

**åŸå› **ï¼šInfluxDB è¿æ¥å¤±è´¥

**è§£å†³**ï¼š
1. æ£€æŸ¥ InfluxDB æœåŠ¡ï¼š`http://localhost:8086`
2. éªŒè¯ token å’Œ bucket é…ç½®
3. ç¡®è®¤æ•°æ®å·²å¯¼å…¥

### Q2: IC ä¸å›æµ‹æ”¶ç›Šä¸æˆæ­£æ¯”

**åŸå› **ï¼šIC è¡¡é‡é¢„æµ‹èƒ½åŠ›ï¼Œå›æµ‹å—äº¤æ˜“æˆæœ¬ã€æµåŠ¨æ€§ã€æç«¯è¡Œæƒ…å½±å“

**å»ºè®®**ï¼š
- æ§åˆ¶æ¢æ‰‹ç‡ï¼ˆé™ä½è°ƒä»“é¢‘ç‡è‡³ 1W æˆ– 1Mï¼‰
- å¢åŠ é€‰è‚¡æ•°é‡ï¼ˆåˆ†æ•£é£é™©ï¼‰
- è¡Œä¸šä¸­æ€§åŒ–ï¼ˆé¿å…é£æ ¼æš´éœ²ï¼‰

### Q3: Alpha ä¸ºè´Ÿ

**å¯èƒ½åŸå› **ï¼š
1. IC è¿‡ä½ï¼ˆ< 0.02ï¼‰
2. è°ƒä»“è¿‡é¢‘ï¼ˆæˆæœ¬åå™¬æ”¶ç›Šï¼‰
3. å› å­å¤±æ•ˆæœŸï¼ˆå¸‚åœºé£æ ¼åˆ‡æ¢ï¼‰

### Q4: LambdaRank æ•ˆæœä¸å¦‚å›å½’

**åŸå› **ï¼šLambdaRank åªå…³å¿ƒæ’åºï¼Œå¯¹æç«¯å€¼ä¸æ•æ„Ÿ

**é€‚ç”¨åœºæ™¯**ï¼š
- é€‰è‚¡æ•°é‡è¾ƒå°‘ï¼ˆTop-10/20ï¼‰
- åªå…³å¿ƒå¤´éƒ¨æ’åºè´¨é‡
- åŸå§‹æ”¶ç›Šåˆ†å¸ƒæç«¯

### Q5: å›æµ‹å‡€å€¼æ›²çº¿ä¸ºä»€ä¹ˆä¸å¹³æ»‘ï¼Ÿ

**åŸå› **ï¼šè°ƒä»“é¢‘ç‡è¶Šä½ï¼ˆå¦‚æœˆåº¦ï¼‰ï¼Œå‡€å€¼æ›²çº¿è¶Šå‘ˆé˜¶æ¢¯çŠ¶

**è§£å†³**ï¼šè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œåæ˜ äº†çœŸå®çš„è°ƒä»“èŠ‚å¥ã€‚å¦‚éœ€æ›´å¹³æ»‘å¯å°† `rebalance_freq` æ”¹ä¸º `'1W'` æˆ– `'1D'`ï¼Œä½†ä¼šå¢åŠ äº¤æ˜“æˆæœ¬ã€‚

---

**å¼€å§‹ä½ çš„é‡åŒ–ç ”ç©¶ä¹‹æ—…ï¼** ğŸš€
