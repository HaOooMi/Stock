# ç‰¹å¾é€‰æ‹©åŠŸèƒ½åˆå¹¶å®Œæˆæ€»ç»“

## ğŸ“‹ æ”¹è¿›å‰åå¯¹æ¯”

### âŒ æ”¹è¿›å‰ï¼ˆå››ä¸ªç‹¬ç«‹æ–¹æ³•ï¼‰
```python
# éœ€è¦åˆ†åˆ«è°ƒç”¨4ä¸ªæ–¹æ³•
variance_filtered, removed_var = engineer.remove_low_variance_features(features_df, 0.001)
corr_filtered, removed_corr = engineer.remove_highly_correlated_features(variance_filtered, 0.95)
supervised_selected, importance_info = engineer.select_features_by_importance(corr_filtered, method='random_forest', top_k=30)
unsupervised_selected, unsup_info = engineer.select_features_unsupervised(corr_filtered, method='mutual_info', top_k=25)
```

### âœ… æ”¹è¿›åï¼ˆä¸€ä¸ªç»Ÿä¸€æ–¹æ³•ï¼‰
```python
# åªéœ€è¦ä¸€ä¸ªæ–¹æ³•è°ƒç”¨
selection_results = engineer.select_features(
    features_df, 
    final_k=25,
    variance_threshold=0.001,
    correlation_threshold=0.95,
    importance_method='random_forest'
)
```

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### 1. æ–¹æ³•æ•´åˆ
- **åŸæ¥**: 4ä¸ªç‹¬ç«‹çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•
- **ç°åœ¨**: 1ä¸ªç»Ÿä¸€çš„`select_features()`æ–¹æ³•
- **ä¼˜åŠ¿**: ç®€åŒ–è°ƒç”¨ï¼Œç»Ÿä¸€æ¥å£ï¼Œå‡å°‘ä»£ç å¤æ‚åº¦

### 2. ç®¡é“åŒ–å¤„ç†
- **åŸæ¥**: éœ€è¦æ‰‹åŠ¨ç®¡ç†å„æ­¥éª¤çš„è¾“å…¥è¾“å‡º
- **ç°åœ¨**: å†…ç½®ç®¡é“è‡ªåŠ¨å¤„ç†å„æ­¥éª¤çš„æ•°æ®æµè½¬
- **ä¼˜åŠ¿**: å‡å°‘å‡ºé”™å¯èƒ½ï¼Œæé«˜æ˜“ç”¨æ€§

### 3. ç»Ÿä¸€è¿”å›æ ¼å¼
```python
results = {
    'final_features_df': final_df,              # æœ€ç»ˆç‰¹å¾æ•°æ®
    'final_features': selected_features,        # é€‰ä¸­çš„ç‰¹å¾åç§°
    'final_features_count': len(selected_features),
    'original_features': original_count,
    'reduction_ratio': reduction_ratio,
    'pipeline_steps': steps_info               # å„æ­¥éª¤è¯¦ç»†ä¿¡æ¯
}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### åŸºç¡€ä½¿ç”¨
```python
from features_engineering import FeatureEngineer

# åˆå§‹åŒ–
engineer = FeatureEngineer()

# ç”Ÿæˆç‰¹å¾
features_df = engineer.prepare_manual_features(stock_data)

# ç»Ÿä¸€ç‰¹å¾é€‰æ‹©
results = engineer.select_features(features_df, final_k=15)

# è·å–ç»“æœ
selected_df = results['final_features_df']
feature_names = results['final_features']
```

### å‚æ•°é…ç½®
```python
# ä¿å®ˆé…ç½® - ä¿ç•™æ›´å¤šç‰¹å¾
results = engineer.select_features(
    features_df,
    final_k=20,
    variance_threshold=0.01,     # è¾ƒé«˜çš„æ–¹å·®é˜ˆå€¼
    correlation_threshold=0.9,   # è¾ƒä½çš„ç›¸å…³æ€§é˜ˆå€¼
    importance_method='random_forest'
)

# æ¿€è¿›é…ç½® - ä¸¥æ ¼ç­›é€‰
results = engineer.select_features(
    features_df,
    final_k=10,
    variance_threshold=0.05,     # å¾ˆé«˜çš„æ–¹å·®é˜ˆå€¼
    correlation_threshold=0.8,   # å¾ˆä½çš„ç›¸å…³æ€§é˜ˆå€¼  
    importance_method='random_forest'
)
```

## ğŸ“Š åŠŸèƒ½ç‰¹ç‚¹

### 1. å®Œæ•´çš„ç‰¹å¾é€‰æ‹©ç®¡é“
- âœ… **æ–¹å·®é˜ˆå€¼è¿‡æ»¤**: å»é™¤ä½æ–¹å·®ç‰¹å¾
- âœ… **ç›¸å…³æ€§è¿‡æ»¤**: å»é™¤é«˜åº¦ç›¸å…³ç‰¹å¾
- âœ… **é‡è¦æ€§é€‰æ‹©**: åŸºäºæ¨¡å‹é‡è¦æ€§æ’åº
- âœ… **è´¨é‡æ£€æŸ¥**: è‡ªåŠ¨åˆ†æç‰¹å¾è´¨é‡

### 2. çµæ´»çš„å‚æ•°æ§åˆ¶
- `final_k`: æœ€ç»ˆä¿ç•™çš„ç‰¹å¾æ•°é‡
- `variance_threshold`: æ–¹å·®é˜ˆå€¼ï¼ˆé»˜è®¤0.001ï¼‰
- `correlation_threshold`: ç›¸å…³æ€§é˜ˆå€¼ï¼ˆé»˜è®¤0.95ï¼‰
- `importance_method`: é‡è¦æ€§è¯„ä¼°æ–¹æ³•ï¼ˆrandom_forest/xgboostï¼‰

### 3. è¯¦ç»†çš„è¿‡ç¨‹ä¿¡æ¯
- æ¯ä¸ªæ­¥éª¤çš„å¤„ç†ç»“æœ
- è¢«åˆ é™¤çš„ç‰¹å¾åˆ—è¡¨
- ç‰¹å¾é‡è¦æ€§æ’åº
- å‰Šå‡ç‡ç»Ÿè®¡

## ğŸ‰ æ”¹è¿›æˆæœ

### ä»£ç ç®€åŒ–
- **ä»£ç è¡Œæ•°å‡å°‘**: ä»éœ€è¦å¤šè¡Œè°ƒç”¨å‡å°‘åˆ°å•è¡Œè°ƒç”¨
- **é”™è¯¯ç‡é™ä½**: å‡å°‘äº†æ‰‹åŠ¨ç®¡ç†æ•°æ®æµçš„å‡ºé”™å¯èƒ½
- **ç»´æŠ¤æ€§æå‡**: ç»Ÿä¸€çš„æ¥å£æ›´å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•

### ç”¨æˆ·ä½“éªŒ
- **å­¦ä¹ æˆæœ¬é™ä½**: åªéœ€å­¦ä¼šä¸€ä¸ªæ–¹æ³•
- **ä½¿ç”¨ä¾¿æ·**: ä¸€æ­¥å®Œæˆæ‰€æœ‰ç‰¹å¾é€‰æ‹©
- **ç»“æœæ¸…æ™°**: ç»Ÿä¸€çš„è¿”å›æ ¼å¼ï¼Œä¿¡æ¯å®Œæ•´

### åŠŸèƒ½å®Œæ•´æ€§
- **ä¿ç•™æ‰€æœ‰åŠŸèƒ½**: åŒ…å«äº†åŸæ¥4ä¸ªæ–¹æ³•çš„æ‰€æœ‰åŠŸèƒ½
- **å¢å¼ºçµæ´»æ€§**: å¯ä»¥é€šè¿‡å‚æ•°æ§åˆ¶å„ä¸ªæ­¥éª¤
- **æå‡ç¨³å®šæ€§**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå¼‚å¸¸ç®¡ç†

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. å¿«é€Ÿå¼€å§‹
```python
# æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
results = engineer.select_features(features_df)  # ä½¿ç”¨é»˜è®¤å‚æ•°
```

### 2. æ¨èé…ç½®
```python
# é€‚åˆå¤§å¤šæ•°åœºæ™¯çš„é…ç½®
results = engineer.select_features(
    features_df,
    final_k=15,                    # é€‚ä¸­çš„ç‰¹å¾æ•°é‡
    variance_threshold=0.001,      # æ ‡å‡†æ–¹å·®é˜ˆå€¼
    correlation_threshold=0.95,    # ä¸¥æ ¼çš„ç›¸å…³æ€§æ§åˆ¶
    importance_method='random_forest'
)
```

### 3. ç”Ÿäº§ç¯å¢ƒ
```python
# ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
results = engineer.select_features(
    features_df,
    final_k=12,                    # å¹³è¡¡æ€§èƒ½å’Œç²¾åº¦
    variance_threshold=0.005,      # å»é™¤æ›´å¤šå™ªå£°
    correlation_threshold=0.92,    # ä¸¥æ ¼ç›¸å…³æ€§æ§åˆ¶
    importance_method='random_forest'
)
```

## âœ… éªŒè¯ç»“æœ

ç»è¿‡æµ‹è¯•éªŒè¯ï¼š
- âœ… åŠŸèƒ½å®Œæ•´æ€§ï¼šæ‰€æœ‰åŸæœ‰åŠŸèƒ½éƒ½å¾—åˆ°ä¿ç•™
- âœ… æ€§èƒ½ç¨³å®šï¼šå¤„ç†é€Ÿåº¦å’Œç»“æœè´¨é‡ä¸åŸæ¥ç›¸å½“
- âœ… æ˜“ç”¨æ€§æå‡ï¼šè°ƒç”¨æ–¹å¼å¤§å¤§ç®€åŒ–
- âœ… é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æç¤º
- âœ… å…¼å®¹æ€§ï¼šä¸ç°æœ‰ä»£ç æ¡†æ¶å®Œå…¨å…¼å®¹

---

**æ€»ç»“**: æˆåŠŸå°†4ä¸ªç‹¬ç«‹çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•åˆå¹¶ä¸º1ä¸ªç»Ÿä¸€çš„`select_features()`æ–¹æ³•ï¼Œå¤§å¹…ç®€åŒ–äº†ä½¿ç”¨æ–¹å¼ï¼ŒåŒæ—¶ä¿æŒäº†åŠŸèƒ½çš„å®Œæ•´æ€§å’Œçµæ´»æ€§ã€‚ç°åœ¨ç”¨æˆ·åªéœ€è¦ä¸€ä¸ªæ–¹æ³•è°ƒç”¨å³å¯å®Œæˆå®Œæ•´çš„ç‰¹å¾é€‰æ‹©æµç¨‹ï¼ğŸ‰